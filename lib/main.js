"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_cdk_lib_1 = require("aws-cdk-lib");
const cdk_bootstrapless_synthesizer_1 = require("cdk-bootstrapless-synthesizer");
const supabase_stack_1 = require("./supabase-stack");
const supabase_waf_stack_1 = require("./supabase-waf-stack");
const isCfnPublishing = typeof process.env.BSS_FILE_ASSET_BUCKET_NAME != 'undefined';
const env = (isCfnPublishing)
    ? undefined
    : { account: process.env.CDK_DEFAULT_ACCOUNT, region: process.env.CDK_DEFAULT_REGION };
const synthesizer = (isCfnPublishing)
    ? new cdk_bootstrapless_synthesizer_1.BootstraplessStackSynthesizer()
    : undefined;
const app = new aws_cdk_lib_1.App();
new supabase_waf_stack_1.SupabaseWafStack(app, 'SupabaseWaf', { env: { region: 'us-east-1' } });
new supabase_stack_1.SupabaseStack(app, 'Supabase', { env, synthesizer });
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQWtDO0FBQ2xDLGlGQUE4RTtBQUM5RSxxREFBaUQ7QUFDakQsNkRBQXdEO0FBRXhELE1BQU0sZUFBZSxHQUFZLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsSUFBSSxXQUFXLENBQUM7QUFFOUYsTUFBTSxHQUFHLEdBQUcsQ0FBQyxlQUFlLENBQUM7SUFDM0IsQ0FBQyxDQUFDLFNBQVM7SUFDWCxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0FBRXpGLE1BQU0sV0FBVyxHQUFHLENBQUMsZUFBZSxDQUFDO0lBQ25DLENBQUMsQ0FBQyxJQUFJLDZEQUE2QixFQUFFO0lBQ3JDLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFFZCxNQUFNLEdBQUcsR0FBRyxJQUFJLGlCQUFHLEVBQUUsQ0FBQztBQUV0QixJQUFJLHFDQUFnQixDQUFDLEdBQUcsRUFBRSxhQUFhLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBRTNFLElBQUksOEJBQWEsQ0FBQyxHQUFHLEVBQUUsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFFekQsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwIH0gZnJvbSAnYXdzLWNkay1saWInO1xyXG5pbXBvcnQgeyBCb290c3RyYXBsZXNzU3RhY2tTeW50aGVzaXplciB9IGZyb20gJ2Nkay1ib290c3RyYXBsZXNzLXN5bnRoZXNpemVyJztcclxuaW1wb3J0IHsgU3VwYWJhc2VTdGFjayB9IGZyb20gJy4vc3VwYWJhc2Utc3RhY2snO1xyXG5pbXBvcnQgeyBTdXBhYmFzZVdhZlN0YWNrIH0gZnJvbSAnLi9zdXBhYmFzZS13YWYtc3RhY2snO1xyXG5cclxuY29uc3QgaXNDZm5QdWJsaXNoaW5nOiBib29sZWFuID0gdHlwZW9mIHByb2Nlc3MuZW52LkJTU19GSUxFX0FTU0VUX0JVQ0tFVF9OQU1FICE9ICd1bmRlZmluZWQnO1xyXG5cclxuY29uc3QgZW52ID0gKGlzQ2ZuUHVibGlzaGluZylcclxuICA/IHVuZGVmaW5lZFxyXG4gIDogeyBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULCByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTiB9O1xyXG5cclxuY29uc3Qgc3ludGhlc2l6ZXIgPSAoaXNDZm5QdWJsaXNoaW5nKVxyXG4gID8gbmV3IEJvb3RzdHJhcGxlc3NTdGFja1N5bnRoZXNpemVyKClcclxuICA6IHVuZGVmaW5lZDtcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuXHJcbm5ldyBTdXBhYmFzZVdhZlN0YWNrKGFwcCwgJ1N1cGFiYXNlV2FmJywgeyBlbnY6IHsgcmVnaW9uOiAndXMtZWFzdC0xJyB9IH0pO1xyXG5cclxubmV3IFN1cGFiYXNlU3RhY2soYXBwLCAnU3VwYWJhc2UnLCB7IGVudiwgc3ludGhlc2l6ZXIgfSk7XHJcblxyXG5hcHAuc3ludGgoKTsiXX0=